gpu
--------

# truenas scale degvoliper mode
install-dev-tools
# download drivers from nvidia
wget https://us.download.nvidia.com/XFree86/Linux-x86_64/570.153.02/NVIDIA-Linux-x86_64-570.153.02.run
mount -o remount,exec /tmp
# install driver
sh ./NVIDIA-Linux-x86_64-570.153.02.run

curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | sudo gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg \
  && curl -s -L https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list | \
    sed 's#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g' | \
    sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list
apt-get update
apt-get install -y nvidia-container-toolkit

# Check current usage (optional)
df -h /tmp

# Unmount /tmp (might need sudo if in use)
sudo umount /tmp

# Remount with a new size (e.g., 10GB, adjust 'size=10G')
sudo mount -t tmpfs -o size=10G,mode=1777 tmpfs /tmp

wget https://developer.download.nvidia.com/compute/cuda/12.9.0/local_installers/cuda_12.9.0_575.51.03_linux.run
mount -o remount,exec /tmp
sh cuda_12.9.0_575.51.03_linux.run


